<?php
declare(strict_types=1);

namespace app\logic\system;

use app\model\system\SystemLinks;
use mowzs\lib\BaseLogic;
use think\db\exception\DataNotFoundException;
use think\db\exception\DbException;
use think\db\exception\ModelNotFoundException;

class LinksLogic extends BaseLogic
{
    protected function initialize(): void
    {
        parent::initialize(); // TODO: Change the autogenerated stub
    }

    /**
     * 获取分类下的链接
     * @param int|string $cid
     * @return array
     * @throws DataNotFoundException
     * @throws DbException
     * @throws ModelNotFoundException
     */
    public function getLinksByCid(int|string $cid = 1): array
    {
        $where = ['cid' => $cid, 'status' => 1];
        return SystemLinks::where($where)->order('list', 'desc')->cache(3600)->select()->toArray();
    }
}
